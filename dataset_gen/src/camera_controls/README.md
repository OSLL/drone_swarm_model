# Controller.py
## Запуск
Запуск контроллера дронов
```sh
rosrun camera_controls controller.py
```
## Работа с контроллером
Движение дрона *drone_name* в глобальные координаты *x y z*
```sh
move drone_name x y z
```
Движение дрона *drone_name* в локальные координаты *x y z*
```sh
move_direct drone_name x y z
```
Поворот дрона *drone_name* по осям roll, pitch, yaw на значения *roll pitch yaw* глобально
```sh
rotate drone_name roll pitch yaw
```
Поворот дрона *drone_name* по осям roll, pitch, yaw на значения *roll pitch yaw* локально
```sh
rotate_direct drone_name roll pitch yaw
```
Движение дрона *drone_name* в глобальные координаты *x y z* и поворот по осям roll, pitch, yaw на значения *roll pitch yaw* глобально
```sh
translate drone_name x y z roll pitch yaw
```
Движение дрона *drone_name* в локальные координаты *x y z* и поворот по осям roll, pitch, yaw на значения *roll pitch yaw* локально
```sh
translate_direct drone_name x y z roll pitch yaw
```
## Описание контроллера
Контроллер считывает верно введенные команды, глобальные координаты переводит в локальные и передает обработанные параметры *x y z roll pitch yaw* в топик *drone_name/cmd_move* сообщением типа *camera_controls/msg_transposition*.
Созданный тип сообщения имеет структуру:
```sh
float64 x
float64 y
float64 z
float64 roll
float64 pitch
float64 yaw
```

# driver.py
## Запуск
Запуск драйвера, который будет управлять дроном с 
именем *drone_name*
```bash
rosrun camera_controls driver.py __name:=drone_name
```

## Описание работы
Драйвер получает сообщения из топика *drone_name/cmd_move* и осуществляет
телепортацию дрона в соответствии с переданными параметрами. Если симуляция не запущена или дрона 
с именем *drone_name* нет на карте, то раз в секунду драйвер будет выводить сообщение: 
- '*Simulation is not running*' 
для случая, если симуляция не запущена, 
- '*Drone named 'drone_name' is not on the map'* если дрона с именем *drone_name* нет на карте.
- *''drone_name' driver ready to receive messages'* ,когда драйверу удаётся соединиться с дроном (данное сообщение выводится один раз)

## Описание получаемого сообщения
Драйвер получает сообщения типа *camera_controls/msg_transposition*

Структура сообщения следующая
```
float64 x - смещение по оси x
float64 y - смещение по оси y
float64 z - смещение по оси z
float64 roll - угол поворота вокруг оси x 
float64 pitсh - угол поворота вокруг оси y
float64 yaw - угол поворота вокруг оси z
```
Углы поворота указываются в радианах

# driver_velocity_based.py
## Запуск
Запуск драйвера, который будет управлять дроном с 
именем *drone_name*
```bash
rosrun camera_controls driver_velocity_based.py __name:=drone_name
```

## Описание работы
Драйвер получает сообщения из топика *drone_name/cmd_vel* и осуществляет
плавное перемещение дрона с соответствии с указанными в переданном сообщении параметрами. Если симуляция не запущена или дрона 
с именем *drone_name* нет на карте, то раз в секунду драйвер будет выводить сообщение: 
- '*Simulation is not running*' 
для случая, если симуляция не запущена, 
- '*Drone named 'drone_name' is not on the map'* если дрона с именем *drone_name* нет на карте.
- *''drone_name' driver ready to receive messages'* ,когда драйверу удаётся соединиться с дроном (данное сообщение выводится один раз)

## Описание получаемого сообщения
Драйвер получает сообщения типа *camera_controls/msg_transposition*

Структура сообщения следующая
```
float64 x - скорость передвижения по оси x
float64 y - скорость передвижения по оси y
float64 z - скорость передвижения по оси z
float64 roll - скорость поворота вокруг оси x 
float64 pitсh - скорость поворота вокруг оси y
float64 yaw - скорость поворота вокруг оси z
```
Углы поворота указываются в радианах

# teleop.py
## Запуск
Запуск ноды, осуществляющей управление дроном с 
именем *drone_name* с помощью клавиатуры
```bash
rosrun camera_controls teleop.py __name:=<drone_name>_teleop
```

## Описание работы
Нода дистанционного управления считывает ввод с клавиатуры и на его основании формирует сообщение типа *camera_controls/msg_transposition*, 
которое передает драйверу соответствующего дрона через топик  *drone_name/cmd_vel*. Если нода дистанционного управления не может найти драйвер
, то раз в секунду она будет выводить сообщение: 
- '*No driver found for the drone named 'drone_name'*'

Когда нода дистанционного управления смогла подключиться к дрону, она уведомляет об этом, выводя на экран сообщение:  
- '*Driver for drone 'drone_name' found*'

Управление дроном осуществляется с помощью клавиатуры:
- w - s — изменение скорости вдоль оси *x*
- d - a — изменение скорости вдоль оси *y*
- b - space  — изменение скорости вдоль оси *z*
- i - k  — изменение скорости вращения вокруг оси *x* (угол *roll*)
- l - j  — изменение скорости вращения вокруг оси *y* (угол *pitch*)
- u - o  — изменение скорости вращения вокруг оси *z* (угол *yaw*)

## Описание передаваемого сообщения
Нода дистанционного управления формирует и отправляет сообщения типа *camera_controls/msg_transposition*

Структура сообщения следующая
```
float64 x - скорость передвижения по оси x
float64 y - скорость передвижения по оси y
float64 z - скорость передвижения по оси z
float64 roll - скорость поворота вокруг оси x 
float64 pitсh - скорость поворота вокруг оси y
float64 yaw - скорость поворота вокруг оси z
```
Углы поворота указываются в радианах

